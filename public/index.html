<!DOCTYPE html>
<!-- lang and dir will be set by JS -->
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <!-- Title will be set by JS -->
    <title data-translate-key="appTitle">NeuroX - ุงูุชูุงุนู ุงูุตูุชู</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐๏ธ</text></svg>">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- iOS Specific Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
</head>
<!-- Theme class will be added by JS -->
<body>

    <!-- ==== Welcome Modal Overlay (Enhanced Multi-Tab) ==== -->
    <div id="welcome-modal-overlay" class="modal-overlay">
        <div id="welcome-modal-content" class="modal-content">
            <!-- Tabs Header -->
            <div class="modal-header-tabs">
                <button class="modal-tab-btn active" data-tab="updates" data-translate-key="welcomeTabUpdates">ุงูุชุญุฏูุซุงุช</button>
                <button class="modal-tab-btn" data-tab="about" data-translate-key="welcomeTabAbout">ุนู NeuroX</button>
                <button class="modal-tab-btn" data-tab="privacy" data-translate-key="welcomeTabPrivacy">ุงูุฎุตูุตูุฉ</button>
            </div>

            <!-- Tab Content Area -->
            <div class="modal-tab-content-container">
                <!-- Panel 1: Updates (Visible by default) -->
                <div id="modal-tab-updates" class="modal-tab-panel visible">
                    <h2 class="modal-title" data-translate-key="welcomeUpdateTitle">ุชุญุฏูุซ NeuroX</h2>
                    <div class="modal-body" id="modal-scrollable-body-updates">
                        <p data-translate-key="welcomeUpdateDesc">ุชู ุชุญุฏูุซ NeuroX ุจููุฒุงุช ุฌุฏูุฏุฉ ูุชุญุณููุงุช ูู ุงูุฃุฏุงุก ูุชุฌุฑุจุฉ ุชูุงุนู ุตูุชู ุฃูุถู.</p>
                        <p><strong data-translate-key="welcomeUpdateHighlights">ุฃุจุฑุฒ ุงูุฌุฏูุฏ:</strong></p>
                        <ul>
                            <!-- Note: Keys are on the <li>. JS must be careful not to overwrite <strong> if it existed -->
                            <li data-translate-key="welcomeUpdatePoint1">ุณุฑุนุฉ ุงุณุชุฌุงุจุฉ ูุงุฆูุฉ.</li>
                            <li data-translate-key="welcomeUpdatePoint2">ููู ุณูุงูู ููุญุณููู.</li>
                            <li data-translate-key="welcomeUpdatePoint3">ุฌูุฏุฉ ุตูุช ุฃูุถู.</li>
                            <li data-translate-key="welcomeUpdatePoint4">ูุงุฌูุฉ ูุณุชุฎุฏู ููุฌุฏููุฏุฉ.</li>
                            <li data-translate-key="welcomeUpdatePoint5">ุฃุณุงุณ ูููุฒุงุช ูุณุชูุจููุฉ.</li>
                        </ul>
                        <p data-translate-key="welcomeUpdateConsent">ุงุณุชุฎุฏุงูู ูุนูู ููุงููุชู ุนูู ุงูุดุฑูุท ุงููุญุฏุซุฉ.</p>
                    </div>
                     <div class="modal-button-group single-button">
                        <button id="accept-terms-btn" class="modal-button primary" data-translate-key="continueBtn">ูุชุงุจุนุฉ</button>
                    </div>
                </div>

                <!-- Panel 2: About -->
                <div id="modal-tab-about" class="modal-tab-panel hidden">
                    <h2 class="modal-title" data-translate-key="welcomeAboutTitle">ูุง ูู NeuroXุ</h2>
                    <div class="modal-body" id="modal-scrollable-body-about">
                        <p data-translate-key="welcomeAboutDesc1">NeuroX ูู ูุณุงุนุฏ ุตูุชู ุฐูู ูุตูู ููููู ูุงูุชูุงุนู ูุนู ุจุดูู ุทุจูุนู ูุณูุณ.</p>
                        <p data-translate-key="welcomeAboutDesc2">ูุญู ูุณุชุฎุฏู ุชูููุงุช ูุชูุฏูุฉ ูู ูุนุงูุฌุฉ ุงููุบุฉ ุงูุทุจูุนูุฉ ูุชูููุฏ ุงูููุงู ูููุฏู ูู ุชุฌุฑุจุฉ ุณูุณุฉ ููุนุงูุฉุ ูุน ุงูุชุฑููุฒ ุนูู ุงูุณุฑุนุฉ ูุงูุฏูุฉ.</p>
                        <p><strong data-translate-key="welcomeAboutFeatHead">ูููุฒุงุช ุฑุฆูุณูุฉ:</strong></p>
                        <ul>
                            <!-- Note: Keys are on the <li>. JS must handle the <strong> inside correctly -->
                            <li data-translate-key="welcomeAboutFeat1"><strong>ููู ุงูุณูุงู:</strong> ูุชุฐูุฑ NeuroX ูุฌุฑู ุงูุญุฏูุซ ูุชูุฏูู ุฑุฏูุฏ ุฃูุซุฑ ููุงุกูุฉ.</li>
                            <li data-translate-key="welcomeAboutFeat2"><strong>ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ:</strong> ููุญุณููู ูุชูุฏูู ุงูุฑุฏูุฏ ุจุฃูู ุชุฃุฎูุฑ ูููู.</li>
                            <li data-translate-key="welcomeAboutFeat3"><strong>ุตูุช ุทุจูุนู:</strong> ุงุณุชูุน ุฅูู ุฑุฏูุฏ ุตูุชูุฉ ูุงุถุญุฉ ูุทุจูุนูุฉ ุจุงููุบุฉ ุงูุชู ุชุฎุชุงุฑูุง.</li>
                            <li data-translate-key="welcomeAboutFeat4"><strong>ูุงุฌูุฉ ุจุณูุทุฉ:</strong> ุชุตููู ูุฑูุฒ ุนูู ุณูููุฉ ุงูุงุณุชุฎุฏุงู ูุงููุตูู ุงูุณุฑูุน ููููุฒุงุช.</li>
                        </ul>
                        <p data-translate-key="welcomeAboutDesc3"><strong>ูุฏููุง:</strong> ุฌุนู ุงูุชูุงุนู ุงูุตูุชู ุจุณูุทูุง ููููุฏูุง ููุชุงุญูุง ููุฌููุนุ ูุน ุงุญุชุฑุงู ุฎุตูุตูุชู.</p>
                    </div>
                     <div class="modal-button-group single-button">
                        <button class="modal-button primary close-modal-btn" data-translate-key="gotItBtn">ูููุช</button>
                    </div>
                </div>

                <!-- Panel 3: Privacy -->
                <div id="modal-tab-privacy" class="modal-tab-panel hidden">
                     <h2 class="modal-title" data-translate-key="welcomePrivacyTitle">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</h2>
                    <div class="modal-body" id="modal-scrollable-body-privacy">
                        <p data-translate-key="welcomePrivacyDesc1">ูุญู ูู NeuroX ูุฃุฎุฐ ุฎุตูุตูุชู ุนูู ูุญูู ุงูุฌุฏ ูููุชุฒู ุจุญูุงูุฉ ุจูุงูุงุชู ุงูุดุฎุตูุฉ.</p>
                        <p data-translate-key="welcomePrivacyDesc2"><strong>ููู ูุณุชุฎุฏู ุจูุงูุงุชู:</strong></p>
                        <ul>
                            <!-- Note: Keys are on the <li>. JS must handle the <strong> inside correctly -->
                            <li data-translate-key="welcomePrivacyPoint1">ุชูุณุชุฎุฏู ูุฏุฎูุงุชู ุงูุตูุชูุฉ ูุงููุตูุฉ <strong data-translate-key="onlyStrong">ููุท</strong> ููุนุงูุฌุฉ ุทูุจุงุชู ูุชูููุฏ ุงูุฑุฏูุฏ ุงูููุงุณุจุฉ ูู ุฎูุงู ููุงุฐุฌ ุงูุฐูุงุก ุงูุงุตุทูุงุนู.</li>
                            <li data-translate-key="welcomePrivacyPoint2">ูุฏ ูุฌูุน ุจูุงูุงุช ุงุณุชุฎุฏุงู ูุฌูููุฉ ุงููุตุฏุฑ (ูุซู ููุน ุงูุทูุจุงุชุ ูุฏุฉ ุงูุงุณุชุฌุงุจุฉุ ุญุฏูุซ ุฃุฎุทุงุก) ูุชุญุณูู ุฃุฏุงุก ุงูุชุทุจูู ูุฏูุฉ ุงูููุงุฐุฌ. ูุฐู ุงูุจูุงูุงุช ูุง ุชุฑุชุจุท ุจู ุดุฎุตููุง.</li>
                            <li data-translate-key="welcomePrivacySecure1"><strong>ุฃูุงู ุงูุจูุงูุงุช:</strong> ูุณุชุฎุฏู ุชุฏุงุจูุฑ ุฃูููุฉ ููุงุณูุฉ ูุญูุงูุฉ ุจูุงูุงุชู ุฃุซูุงุก ุงูููู ูุงูุชุฎุฒูู.</li>
                             <li data-translate-key="welcomePrivacyPoint3"><strong>ุนุฏู ุงููุดุงุฑูุฉ:</strong> ูุง ูุดุงุฑู ุจูุงูุงุชู ุงูุตูุชูุฉ ุฃู ุงููุตูุฉ ุฃู ุฃู ูุนูููุงุช ุชุนุฑูู ุดุฎุตูุฉ ูุน ุฃุทุฑุงู ุซุงูุซุฉ ูุฃุบุฑุงุถ ุชุฌุงุฑูุฉ ุฃู ุฅุนูุงููุฉ ุฏูู ููุงููุชู ุงูุตุฑูุญุฉ.</li>
                            <li data-translate-key="welcomePrivacyControl1"><strong>ุงูุชุญูู ูุงูุดูุงููุฉ:</strong> ููููู ูุณุญ ุณุฌู ูุญุงุฏุซุงุชู ุงููุฎุฒู ูุญูููุง ูู ุฃู ููุช ูู ุฎูุงู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู.</li>
                        </ul>
                         <p data-translate-key="welcomePrivacyDesc4">ูุญู ูุณุชุฎุฏู ูุงุฌูุงุช ุจุฑูุฌุฉ ุชุทุจููุงุช (APIs) ุฎุงุฑุฌูุฉ ููุนุงูุฌุฉ ุงููุบุฉ ูุชูููุฏ ุงูุตูุช. ูุฏ ุชุฎุถุน ูุฐู ุงูุฎุฏูุงุช ูุณูุงุณุงุช ุงูุฎุตูุตูุฉ ุงูุฎุงุตุฉ ุจูุง.</p>
                        <!-- Note: Key is on the <p>, contains an <a> -->
                        <p data-translate-key="welcomePrivacyDesc3">ูููุฒูุฏ ูู ุงูุชูุงุตููุ ููููู ุงูุงุทูุงุน ุนูู ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ุงููุงููุฉ <a href="#" class="footer-links" data-translate-key="hereLink">ููุง</a>.</p>
                    </div>
                     <div class="modal-button-group single-button">
                        <button class="modal-button primary close-modal-btn" data-translate-key="gotItBtn">ูููุช</button>
                    </div>
                </div>
            </div>

             <!-- Step 2 (Confirmation - shown after Step 1 'Continue') -->
            <div id="modal-step-2" style="display: none;">
                 <h3 class="modal-subtitle" data-translate-key="welcomeConfirmTitle">ุชูุช ุงูููุงููุฉ</h3>
                 <p class="confirmation-message" data-translate-key="welcomeConfirmMsg">ูู ุชุฑุบุจ ุจุฑุคูุฉ ุฑุณุงุฆู ุงูุชุญุฏูุซุงุช ุงูุฑุฆูุณูุฉ ูุณุชูุจููุงุ</p>
                 <div class="modal-button-group">
                     <button id="show-again-btn" class="modal-button secondary" data-translate-key="yesBtn">ูุนู</button>
                     <button id="dont-show-again-btn" class="modal-button tertiary" data-translate-key="noBtn">ูุง</button>
                 </div>
            </div>

        </div>
    </div>
    <!-- ==== End Welcome Modal ==== -->

    <!-- ==== Microphone Permission Modal ==== -->
    <div id="mic-permission-modal-overlay" class="modal-overlay">
        <div id="mic-permission-modal-content" class="modal-content">
            <div class="modal-icon"><i class="fas fa-microphone-alt"></i></div>
            <h2 class="modal-title" data-translate-key="micPermissionTitle">ุฅุฐู ุงููููุฑูููู ูุทููุจ</h2>
            <div class="modal-body" data-translate-key="micPermissionDesc">
                ูุญุชุงุฌ NeuroX ุฅูู ุงููุตูู ุฅูู ุงููููุฑูููู ุงูุฎุงุต ุจู ููุงุณุชูุงุน ุฅูู ุฃูุงูุฑู ุงูุตูุชูุฉ. ูู ูุชู ุชุณุฌูู ุฃู ุดูุก ุฅูุง ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงููููุฑูููู.
            </div>
            <div class="modal-button-group">
                <button id="allow-mic-btn" class="modal-button primary" data-translate-key="allowBtn">ุงูุณูุงุญ</button>
                <button id="deny-mic-btn" class="modal-button tertiary" data-translate-key="denyBtn">ุฑูุถ</button>
            </div>
        </div>
    </div>
    <!-- ==== End Mic Permission Modal ==== -->


    <!-- ==== Main Page Content ==== -->
    <div class="page-wrapper">
        <!-- ==== Sidebar (iOS Style Sheet Modal) ==== -->
        <aside id="history-sidebar" class="history-sidebar" aria-label="Conversation History">
            <div class="sidebar-header">
                <button id="settings-btn" class="sidebar-toggle-btn settings-btn" aria-label="Settings" data-translate-key="settingsLabel">
                    <i class="fas fa-cog"></i>
                </button>
                <h3 data-translate-key="historyTitle">ุงูุณุฌู</h3>
                <button id="close-sidebar-btn" class="sidebar-toggle-btn close-sidebar-btn" aria-label="Close" data-translate-key="closeLabel">
                     <i class="fas fa-times"></i>
                </button>
            </div>
            <!-- Settings Panel (Initially Hidden) -->
             <div id="settings-panel" class="settings-panel">
                 <h4 data-translate-key="languageLabel">ุงููุบุฉ</h4>
                 <div class="language-selector">
                     <button id="lang-ar-btn" class="language-btn" data-lang="ar" data-translate-key="langAr">ุงูุนุฑุจูุฉ</button>
                     <button id="lang-en-btn" class="language-btn" data-lang="en" data-translate-key="langEn">English</button>
                 </div>
             </div>
            <!-- History List -->
            <ul id="history-list" class="history-list">
                <!-- Content generated by JS -->
                <li class="history-empty" data-translate-key="historyEmpty">ูุง ููุฌุฏ ุณุฌู ุญุชู ุงูุขู.</li>
            </ul>
            <!-- Footer with Clear Button -->
            <div class="sidebar-footer">
                <button id="clear-history-btn" class="clear-history-btn" title="Clear History" data-translate-key="clearHistoryLabel">
                    <i class="fas fa-trash"></i> <span data-translate-key="clearHistoryBtn">ูุณุญ ุงูุณุฌู</span>
                </button>
            </div>
        </aside>

        <!-- ==== Main Content ==== -->
        <div class="main-container">
            <!-- Header -->
            <header class="main-header">
                 <button id="open-sidebar-btn" class="header-button open-sidebar-btn" aria-label="Open History" aria-controls="history-sidebar" data-translate-key="openHistoryLabel">
                    <i class="fa-regular fa-clock"></i>
                 </button>
                 <div class="header-title">
                     <span class="logo-icon"><i class="fa-solid fa-brain"></i></span> NeuroX
                 </div>
                 <button id="theme-toggle-btn" class="header-button theme-toggle-btn" aria-label="Toggle Theme" data-translate-key="toggleThemeLabel">
                    <i class="fa-solid fa-moon"></i> <!-- Icon updated by JS -->
                 </button>
            </header>

            <!-- Interaction Zone -->
            <main class="interaction-zone fade-in">
                <div class="status-container">
                    <div id="status-indicator" class="status-indicator">
                        <span id="status-text" data-translate-key="statusTapToStart">ุงููุฑ ููุจุฏุก</span>
                        <div class="loader-wrapper" id="loader-wrapper" style="display: none;">
                            <div class="loader"></div>
                        </div>
                    </div>
                </div>

                <!-- Voice Selector -->
                <div class="voice-selector-container">
                    <label for="voice-select" data-translate-key="voiceSelectLabel">ุงุฎุชุฑ ูุจุฑุฉ ุงูุตูุช:</label>
                    <select name="voices" id="voice-select">
                        <option value="21m00Tcm4TlvDq8ikWAM">Default (Adam)</option>
                        <option value="zrHiDhphv9ZnVXBqCL5L">Rachel - Calm American</option>
                        <option value="EXAVITQu4vr4xnSDxMaL">Bella - Soft American</option>
                        <option value="MF3mGyEYCl7XYWbV9V6O">Elli - Emotional American</option>
                        <option value="TxGEqnHWrfWFTfGW9XjX">Josh - Deep American</option>
                        <option value="ThT5KcBeYPX3keUQqHPh">Arnold - Crisp American</option>
                        <option value="VR6AewLTigWG4xSOukaG">Domi - Strong Polish</option>
                        <option value="yoZ06aMxZJJ28mfd3POQ">Fin - Stylish British</option>
                    </select>
                </div>
                <!-- End Voice Selector -->

                <div class="microphone-container">
                    <button id="mic-button" class="mic-button" aria-label="Start Listening" data-translate-key="micBtnStartLabel">
                        <div class="mic-icon-container">
                             <i class="fas fa-microphone"></i> <!-- Icon updated by JS -->
                        </div>
                        <div class="pulse-effect"></div>
                    </button>
                </div>

                <div id="output-area" class="output-area" aria-live="polite" role="log">
                    <!-- Placeholder inserted by JS if empty -->
                    <p class="placeholder" data-translate-key="outputPlaceholder">ุงููุญุงุฏุซุฉ ุชุธูุฑ ููุง...</p>
                </div>
            </main>

             <!-- Info Sections Combined -->
            <section class="info-section fade-in" style="animation-delay: 0.2s;">
                <h2 data-translate-key="infoCapabilitiesTitle">ุงููุฏุฑุงุช ุงูุฃุณุงุณูุฉ</h2>
                <div class="info-card-list">
                    <div class="info-card">
                        <div class="card-icon tech"><i class="fas fa-wave-square"></i></div>
                        <div class="card-text">
                            <h4 data-translate-key="infoCap1Title">ุงูุชุนุฑู ุนูู ุงูููุงู</h4>
                            <p data-translate-key="infoCap1Desc">ููู ุฏููู ูููุงูู.</p>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="card-icon tech"><i class="fas fa-brain"></i></div>
                        <div class="card-text">
                            <h4 data-translate-key="infoCap2Title">ููู ุงููุบุฉ</h4>
                            <p data-translate-key="infoCap2Desc">ุชุญููู ุงููุนูู ูุงููุตุฏ.</p>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="card-icon tech"><i class="fas fa-volume-high"></i></div>
                        <div class="card-text">
                            <h4 data-translate-key="infoCap3Title">ุชูููุฏ ุงูููุงู</h4>
                            <p data-translate-key="infoCap3Desc">ุงุณุชุฌุงุจุงุช ุตูุชูุฉ ุทุจูุนูุฉ.</p>
                        </div>
                    </div>
                     <div class="info-card">
                        <div class="card-icon feature"><i class="fas fa-memory"></i></div>
                         <div class="card-text">
                            <h4 data-translate-key="infoCap4Title">ุฐุงูุฑุฉ ุณูุงููุฉ</h4>
                            <p data-translate-key="infoCap4Desc">ุชุฐูุฑ ุงููุญุงุฏุซุงุช ุงูุณุงุจูุฉ.</p>
                         </div>
                    </div>
                     <div class="info-card">
                        <div class="card-icon feature"><i class="fas fa-shield-halved"></i></div>
                         <div class="card-text">
                            <h4 data-translate-key="infoCap5Title">ุฎุตูุตูุฉ ูุฃูุงู</h4>
                            <p data-translate-key="infoCap5Desc">ุญูุงูุฉ ุจูุงูุงุชู ุฃููููุชูุง.</p>
                         </div>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="platform-footer fade-in" style="animation-delay: 0.4s;">
                 <div class="footer-links">
                    <!-- Note: Keys are on the <a> -->
                    <a href="#" data-translate-key="privacyLink">ุงูุฎุตูุตูุฉ</a>
                    <span class="link-separator">ยท</span>
                    <a href="#" data-translate-key="termsLink">ุงูุดุฑูุท</a>
                 </div>
                 <!-- Year updated by JS -->
                <p>ยฉ <span id="current-year"></span> NeuroX</p>
            </footer>
        </div><!-- End Main Content -->

    </div><!-- End page-wrapper -->

    <!-- Invisible Audio Element -->
    <audio id="response-audio"></audio>

    <script src="script.js" defer></script>
    <script>
        // Basic setup like year can remain here for quick execution
        document.addEventListener('DOMContentLoaded', () => {
            const currentYearEl = document.getElementById('current-year');
            if (currentYearEl) {
                 currentYearEl.textContent = new Date().getFullYear();
            }
            // Main app logic is deferred to script.js
        });
    </script>

</body>
</html>